
 $Id: README,v 1.9 1997/04/11 19:38:20 jimg Exp $

The following provides background technical information on the design of
loaddods/writeval. For installation information, see the file
INSTALL-matlab-client and for help using the matlab command `loaddods', see
the on-line help for that command (in Matlab type `help loaddods'). Make sure
that the file loaddods.m is in the same directory as the loaddods.mex*
program.

There are two programs that comprise the DODS-Matlab interface; loaddods and
whodods. They are analogous to Matlab's load and who commands. However, they
accept DODS URLs rather than Matlab files. On-line help is available for both
commands - make sure that you have the loaddods.m, loaddods.mex* and
whodods.m file in a directory that Matlab will search for binaries.

Here is a summary of the software in the entire DODS Matlab client (including
parts that users don't see and option parts):

1) loaddods; A cmex program run by Matlab. This program must be accessible to
Matlab. It can be placed in either a user's directory for scripts and
extensions or in a system-wide directory. 

loaddods accepts several command line switches:
   -V to get the version of loaddods. 
   -g to activate the GUI.
   +v to turn off verbose mode (it is on by default). 

When called with a command switch, you must give that switch first and it
must be quoted. E.G.: loaddods('-g', 'http://...')

loaddods can be used in four ways:

a) when run with a URL as its argument the program assumes that the URL is a
fully qualified DODS URL and invokes writeval to get the associated data,

b) if loaddods is run with `*' or '?' as its argument, the program will start
Netscape and open the DODS locator main page,

c) a URL prefixed by a `*' or `?' will be passed to netscape and used as an
alternative data locator page, and

d) with no argument at all, loaddods waits for a URL to be sent via a WWW
browser.

loaddods is a very flexible program since you can use it with a URL
saved or cut from some other source, with the HTML interface we have built,
with some other interface or after you have found some data with the browser.

2) writeval; Dereferences a DODS URL and returns a binary stream of data.
This can be installed anywhere on the system, but its path is hard coded into
the loaddods program so unless you want to modify the loaddods source code it
should be placed in the same directory as loaddods. While this program is
used by loaddods, it could be used for other purposes as well. For example a
user could save binary data to a file with writeval. Note that with the `-f'
option writeval translates all simple types to either Float64 or String.

3) urlqueue; A helper application for Netscape (or other WWW browser) which
passes information from a browser to another program such as loaddods. The
file `mailcap' contains a sample mailcap file entry for the helper
application.

4) posturl.pl; Users do not need to have this on their system. It is included
here for completeness. However, if users want to write their own HTML forms
for building URLs then they can install and use their own copy of posturl and
make a completely self contained system.

5) whodods; print the Dataset Descriptor Structure for the URL. This provides
a way to look at the structure of a dataset without leaving Matlab. It can be
thought of as a simple alternative to the HTML-based GUI (although users
don't need to leave Matlab to use that either...).

------------

Here is a pseudo grammar describing the output of writeval. I used * as the
Kleene closure (zero or more) and + a one or more. Basically, the idea is
simple; write the type and name of the variable on one line and data for it
on the next. For ctor types it becomes more complex, but not much. For arrays
write Array, the type, the name, the number of dimensions and a list of
dimension sizes on one line and the data on the next line. 

<data request> :: <variable>*

<simple variable> :: <variable name> '\n'

<array variable> :: <variable type> <variable name> <number of dims> 
		    <dim size>+ 

<list variable> :: <variable type> <variable name> <list size>

<struct variables> :: <variable name> <num of elements> '\n' 
		      (<variable> '\n' <data> '\n')+

<sequence variables> :: <variable name> <num of elements> '\n' 
			(<variable> '\n' <data> '\n')+

<grid variables> :: <variable name> '\n' 'array 1\n' <array variable>
		    'map <num of arrays>\n' (<array variable>)+ 

<variable> :: Byte ' ' <simple variable> '\n' <data> '\n'
	   :: Int32 ' ' <simple variable> '\n' <data> '\n'
	   :: Float64 ' ' <simple variable> '\n'  <data> '\n'
	   :: Str ' ' <simple variable> '\n' <data> '\n'
	   :: Url ' ' <simple variable> '\n' <data> '\n'

	   :: Array ' ' <array variable> '\n' <data> '\n'
	   :: List ' ' <list variable> '\n' <data> '\n'

	   :: Structure ' ' <struct variables>
	   :: Sequence ' ' <sequence variables>
	   :: Function ' ' <function variables>
	   :: Grid ' ' <grid variables>

James Gallagher 10/4/96